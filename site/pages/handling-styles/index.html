<!DOCTYPE html>

<!--

#######################################################

REMINDER: Don't edit the index.html page directly. It's
created by the site builder. Any changes you make to
it manually will be overwritten.

#######################################################

-->


<html lang="en">
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="apple-touch-icon" sizes="180x180" href="/favicons/apple-touch-icon.png" />
    <link rel="icon" type="image/png" sizes="32x32" href="/favicons/favicon-32x32.png" />
    <link rel="icon" type="image/png" sizes="16x16" href="/favicons/favicon-16x16.png" />
    <link rel="manifest" href="/favicons/site.webmanifest" />
    <link rel="mask-icon" href="/favicons/safari-pinned-tab.svg" color="#5bbad5" />
    <link rel="shortcut icon" href="/favicons/favicon.ico" />
    <meta name="msapplication-TileColor" content="#da532c" />
    <meta name="msapplication-config" content="/favicons/browserconfig.xml" />
    <meta name="theme-color" content="#000000" />

    <title>Handling Styles In Web Components - Alan's Web Component Techniques</title>
    <meta name="description" content="My approach to passing styles between pages and components" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta property="og:description" content="My approach to passing styles between pages and components" />
    <meta property="og:title" content="Handling Styles In Web Components - Alan's Web Component Techniques" />
    <meta property="og:url" content="https://web-component-techniques.alanwsmith.com/pages/handling-styles/" />
    <meta property="og:image" content="https://web-component-techniques.alanwsmith.com/images/og-image.jpg" />
    <link rel="stylesheet" href="/styles/main.css" />
    <link rel="stylesheet" href="styles.css" />
  </head>
 
  <body>
    <header>
      <a href="/">Techniques Home</a> ~
      <a href="https://www.alanwsmith.com/">alanwsmith.com</a> ~
      <a href="https://links.alanwsmith.com/">other projects</a> ~
      <a href="https://socials.alanwsmith.com/">socials</a>
    </header>

    <main class="flow"> 
      <hgroup>
        <h1>Handling Styles In Web Components</h1>
        <p>January 2025</p>
      </hgroup>
      
      <h2>Introduction</h2>

      <p>
        One aspect of web components I struggle with is
        that they never feel self-contained. The main
        place I feel that friction is with styles. Specifically:
      </p>

      <ul>
        <li>
          <p>
            I'm having to apply a <code>display: block;</code> 
            in the parent page's CSS to get my components to render 
            properly. Or, I have to add <code>display: inline-block</code>
            if I want the behavior. 
          </p>
          <p>
            (It seems entirely plausible that I'm missing something
            here that would take care of this. It's certainly not
            obvious to me if that's true)
          </p>
        </li>
        <li>
          Components have access to the CSS variables set
          on the parent page. That's great as far as it goes, but
          the way I'd been thinking about it, it required the
          page that was using the component to have to adjust
          itself to accommodate whatever variable names
          the component expects
        </li>
      </ul>

      <p>
        In both cases, using the component requires messing
        with the parent page's CSS. I really don't like the
        way that feels. I had a couple realizations 
        about how to address those issues. This page is for
        taking a look at them. 
      </p>
      <p>
        Fair warning: I'm still new to web components. 
        I may be off-base here. Part of the reason I'm doing
        this write up it to solicit feedback. 
      </p>
      <p>
        With that said, here's what I'm doing:
      </p>

      <h2>Overview</h2>

      <p>
        There are two techniques I'm using to address working
        with styles:
      </p>

      <ol>
        <li>
          Add a stylesheet by creating a new element and 
          appending it to the parent page via <code>document.head</code>
          from the component's <code>.js</code> file before 
          creating the class itself
        </li>
        <li>
          Pass the names of CSS variables (or specific values) 
          to use into the component via attributes
          in the custom element's tag
        </li>
      </ol>

      <p>
        Using those methods together I can use 
        a component on a page without having
        to adjust the parent's CSS at all. The 
        only thing I touch is the component 
        tag and its attributes. 
      </p>

      <h2>The Component File</h2>

      <p>
        Here's a full example of a component file
        where I'm using the techniques. It's what
        powers the examples on this page.
      </p>

      <div>
        <pre><code><span class="line-marker"></span><span class="source js"><span class="storage type js">const</span> <span class="variable other readwrite js">componentStyles</span> <span class="keyword operator assignment js">=</span> <span class="support type object dom js">document</span><span class="punctuation accessor js">.</span><span class="meta function-call method js"><span class="support function dom js">createElement</span><span class="meta group js"><span class="punctuation section group js">(</span><span class="string quoted single js"><span class="punctuation definition string begin js">&#39;</span>style<span class="punctuation definition string end js">&#39;</span></span></span><span class="meta group js"><span class="punctuation section group js">)</span></span></span>
<span class="line-marker"></span><span class="variable other object js">componentStyles</span><span class="punctuation accessor js">.</span><span class="meta property object js">innerHTML</span> <span class="keyword operator assignment js">=</span> <span class="string template js"><span class="punctuation definition string template begin js">`</span>
<span class="line-marker"></span>  aws-wc {
<span class="line-marker"></span>    display: inline-block;
<span class="line-marker"></span>  }
<span class="line-marker"></span><span class="punctuation definition string template end js">`</span></span>
<span class="line-marker"></span><span class="support type object dom js">document</span><span class="punctuation accessor js">.</span><span class="meta property object js">head</span><span class="punctuation accessor js">.</span><span class="meta function-call method js"><span class="support function dom js">appendChild</span><span class="meta group js"><span class="punctuation section group js">(</span><span class="variable other readwrite js">componentStyles</span></span><span class="meta group js"><span class="punctuation section group js">)</span></span></span>
<span class="line-marker"></span>
<span class="line-marker"></span><span class="meta class js"><span class="storage type class js">class</span> <span class="entity name class js">AlansWebComponent</span> <span class="storage modifier extends js">extends</span> <span class="entity other inherited-class js">HTMLElement</span> <span class="meta class js"><span class="meta block js"><span class="punctuation section block js">{</span></span></span></span><span class="meta class js"><span class="meta block js">
<span class="line-marker"></span>  <span class="meta function declaration js"><span class="entity name function js">constructor</span><span class="punctuation section group begin js">(</span><span class="punctuation section group end js">)</span><span class="meta function declaration js"> </span></span><span class="meta block js"><span class="punctuation section block js">{</span>
<span class="line-marker"></span>    <span class="meta function-call js"><span class="support function js">super</span><span class="meta group js"><span class="punctuation section group js">(</span></span><span class="meta group js"><span class="punctuation section group js">)</span></span></span>
<span class="line-marker"></span>    <span class="variable language this js">this</span><span class="punctuation accessor js">.</span><span class="meta function-call method js"><span class="variable function js">attachShadow</span><span class="meta group js"><span class="punctuation section group js">(</span><span class="meta object-literal js"><span class="punctuation section block js">{</span><span class="meta object-literal key js">mode</span><span class="punctuation separator key-value js">:</span> <span class="string quoted single js"><span class="punctuation definition string begin js">&#39;</span>open<span class="punctuation definition string end js">&#39;</span></span><span class="punctuation section block js">}</span></span></span><span class="meta group js"><span class="punctuation section group js">)</span></span></span>
<span class="line-marker"></span>  <span class="punctuation section block js">}</span></span>
<span class="line-marker"></span>
<span class="line-marker"></span>  <span class="meta function declaration js"><span class="entity name function js">connectedCallback</span><span class="punctuation section group begin js">(</span><span class="punctuation section group end js">)</span><span class="meta function declaration js"> </span></span><span class="meta block js"><span class="punctuation section block js">{</span>
<span class="line-marker"></span>    <span class="variable language this js">this</span><span class="punctuation accessor js">.</span><span class="meta function-call method js"><span class="variable function js">getColors</span><span class="meta group js"><span class="punctuation section group js">(</span></span><span class="meta group js"><span class="punctuation section group js">)</span></span></span>
<span class="line-marker"></span>    <span class="variable language this js">this</span><span class="punctuation accessor js">.</span><span class="meta property object js">shadowRoot</span><span class="punctuation accessor js">.</span><span class="meta function-call method js"><span class="variable function js">append</span><span class="meta group js"><span class="punctuation section group js">(</span><span class="variable language this js">this</span><span class="punctuation accessor js">.</span><span class="meta function-call method js"><span class="variable function js">styles</span><span class="meta group js"><span class="punctuation section group js">(</span></span><span class="meta group js"><span class="punctuation section group js">)</span></span></span></span><span class="meta group js"><span class="punctuation section group js">)</span></span></span>
<span class="line-marker"></span>    <span class="storage type js">const</span> <span class="variable other readwrite js">contents</span> <span class="keyword operator assignment js">=</span> 
<span class="line-marker"></span>      <span class="variable language this js">this</span><span class="punctuation accessor js">.</span><span class="meta function-call method js"><span class="variable function js">template</span><span class="meta group js"><span class="punctuation section group js">(</span></span><span class="meta group js"><span class="punctuation section group js">)</span></span></span><span class="punctuation accessor js">.</span><span class="meta property object js">content</span><span class="punctuation accessor js">.</span><span class="meta function-call method js"><span class="support function dom js">cloneNode</span><span class="meta group js"><span class="punctuation section group js">(</span><span class="constant language boolean true js">true</span></span><span class="meta group js"><span class="punctuation section group js">)</span></span></span>
<span class="line-marker"></span>    <span class="variable language this js">this</span><span class="punctuation accessor js">.</span><span class="meta property object js">shadowRoot</span><span class="punctuation accessor js">.</span><span class="meta function-call method js"><span class="variable function js">append</span><span class="meta group js"><span class="punctuation section group js">(</span><span class="variable other readwrite js">contents</span></span><span class="meta group js"><span class="punctuation section group js">)</span></span></span>
<span class="line-marker"></span>  <span class="punctuation section block js">}</span></span>
<span class="line-marker"></span>
<span class="line-marker"></span>  <span class="meta function declaration js"><span class="entity name function js">getColors</span><span class="punctuation section group begin js">(</span><span class="punctuation section group end js">)</span><span class="meta function declaration js"> </span></span><span class="meta block js"><span class="punctuation section block js">{</span>
<span class="line-marker"></span>    <span class="variable language this js">this</span><span class="punctuation accessor js">.</span><span class="meta property object js">backgroundColor</span> <span class="keyword operator assignment js">=</span> 
<span class="line-marker"></span>      <span class="variable language this js">this</span><span class="punctuation accessor js">.</span><span class="meta function-call method js"><span class="support function dom js">getAttribute</span><span class="meta group js"><span class="punctuation section group js">(</span><span class="string quoted single js"><span class="punctuation definition string begin js">&#39;</span>backgroundColor<span class="punctuation definition string end js">&#39;</span></span></span><span class="meta group js"><span class="punctuation section group js">)</span></span></span> 
<span class="line-marker"></span>      <span class="keyword operator ternary js">?</span> <span class="variable language this js">this</span><span class="punctuation accessor js">.</span><span class="meta function-call method js"><span class="support function dom js">getAttribute</span><span class="meta group js"><span class="punctuation section group js">(</span><span class="string quoted single js"><span class="punctuation definition string begin js">&#39;</span>backgroundColor<span class="punctuation definition string end js">&#39;</span></span></span><span class="meta group js"><span class="punctuation section group js">)</span></span></span> 
<span class="line-marker"></span>      <span class="keyword operator ternary js">:</span> <span class="string quoted single js"><span class="punctuation definition string begin js">&#39;</span>blue<span class="punctuation definition string end js">&#39;</span></span>
<span class="line-marker"></span>    <span class="variable language this js">this</span><span class="punctuation accessor js">.</span><span class="meta property object js">textColor</span> <span class="keyword operator assignment js">=</span> 
<span class="line-marker"></span>      <span class="variable language this js">this</span><span class="punctuation accessor js">.</span><span class="meta function-call method js"><span class="support function dom js">getAttribute</span><span class="meta group js"><span class="punctuation section group js">(</span><span class="string quoted single js"><span class="punctuation definition string begin js">&#39;</span>textColor<span class="punctuation definition string end js">&#39;</span></span></span><span class="meta group js"><span class="punctuation section group js">)</span></span></span> 
<span class="line-marker"></span>      <span class="keyword operator ternary js">?</span> <span class="variable language this js">this</span><span class="punctuation accessor js">.</span><span class="meta function-call method js"><span class="support function dom js">getAttribute</span><span class="meta group js"><span class="punctuation section group js">(</span><span class="string quoted single js"><span class="punctuation definition string begin js">&#39;</span>textColor<span class="punctuation definition string end js">&#39;</span></span></span><span class="meta group js"><span class="punctuation section group js">)</span></span></span> 
<span class="line-marker"></span>      <span class="keyword operator ternary js">:</span> <span class="string quoted single js"><span class="punctuation definition string begin js">&#39;</span>inherit<span class="punctuation definition string end js">&#39;</span></span>
<span class="line-marker"></span>  <span class="punctuation section block js">}</span></span>
<span class="line-marker"></span>
<span class="line-marker"></span>  <span class="meta function declaration js"><span class="entity name function js">template</span><span class="punctuation section group begin js">(</span><span class="punctuation section group end js">)</span><span class="meta function declaration js"> </span></span><span class="meta block js"><span class="punctuation section block js">{</span>
<span class="line-marker"></span>    <span class="storage type js">const</span> <span class="variable other readwrite js">template</span> <span class="keyword operator assignment js">=</span> 
<span class="line-marker"></span>      <span class="variable language this js">this</span><span class="punctuation accessor js">.</span><span class="meta property object js">ownerDocument</span><span class="punctuation accessor js">.</span><span class="meta function-call method js"><span class="support function dom js">createElement</span><span class="meta group js"><span class="punctuation section group js">(</span><span class="string quoted single js"><span class="punctuation definition string begin js">&#39;</span>template<span class="punctuation definition string end js">&#39;</span></span></span><span class="meta group js"><span class="punctuation section group js">)</span></span></span>
<span class="line-marker"></span>    <span class="variable other object js">template</span><span class="punctuation accessor js">.</span><span class="meta property object js">innerHTML</span> <span class="keyword operator assignment js">=</span> <span class="string template js"><span class="punctuation definition string template begin js">`</span>&lt;div&gt;Ping&lt;/div&gt;<span class="punctuation definition string template end js">`</span></span>
<span class="line-marker"></span>    <span class="keyword control flow js">return</span> <span class="variable other readwrite js">template</span> 
<span class="line-marker"></span>  <span class="punctuation section block js">}</span></span>
<span class="line-marker"></span>
<span class="line-marker"></span>  <span class="meta function declaration js"><span class="entity name function js">styles</span><span class="punctuation section group begin js">(</span><span class="punctuation section group end js">)</span><span class="meta function declaration js"> </span></span><span class="meta block js"><span class="punctuation section block js">{</span>
<span class="line-marker"></span>    <span class="storage type js">const</span> <span class="variable other readwrite js">styles</span> <span class="keyword operator assignment js">=</span> <span class="support type object dom js">document</span><span class="punctuation accessor js">.</span><span class="meta function-call method js"><span class="support function dom js">createElement</span><span class="meta group js"><span class="punctuation section group js">(</span><span class="string quoted single js"><span class="punctuation definition string begin js">&#39;</span>style<span class="punctuation definition string end js">&#39;</span></span></span><span class="meta group js"><span class="punctuation section group js">)</span></span></span>
<span class="line-marker"></span>    <span class="variable other object js">styles</span><span class="punctuation accessor js">.</span><span class="meta property object js">innerHTML</span> <span class="keyword operator assignment js">=</span> <span class="string template js"><span class="punctuation definition string template begin js">`</span>
<span class="line-marker"></span>      div {
<span class="line-marker"></span>        background: </span><span class="meta template expression js"><span class="punctuation definition template-expression begin js">${</span></span><span class="meta template expression js"><span class="source js embedded expression"><span class="variable language this js">this</span><span class="punctuation accessor js">.</span><span class="meta property object js">backgroundColor</span></span><span class="punctuation definition template-expression end js">}</span></span><span class="string template js">;
<span class="line-marker"></span>        border-radius: 0.4rem;
<span class="line-marker"></span>        color: </span><span class="meta template expression js"><span class="punctuation definition template-expression begin js">${</span></span><span class="meta template expression js"><span class="source js embedded expression"><span class="variable language this js">this</span><span class="punctuation accessor js">.</span><span class="meta property object js">textColor</span></span><span class="punctuation definition template-expression end js">}</span></span><span class="string template js">;
<span class="line-marker"></span>        padding: 0.3rem;
<span class="line-marker"></span>      }
<span class="line-marker"></span>    <span class="punctuation definition string template end js">`</span></span>
<span class="line-marker"></span>    <span class="keyword control flow js">return</span> <span class="variable other readwrite js">styles</span> 
<span class="line-marker"></span>  <span class="punctuation section block js">}</span></span>
<span class="line-marker"></span><span class="punctuation section block js">}</span></span></span>
<span class="line-marker"></span>
<span class="line-marker"></span><span class="variable other object js">customElements</span><span class="punctuation accessor js">.</span><span class="meta function-call method js"><span class="variable function js">define</span><span class="meta group js"><span class="punctuation section group js">(</span><span class="string quoted single js"><span class="punctuation definition string begin js">&#39;</span>aws-wc<span class="punctuation definition string end js">&#39;</span></span><span class="punctuation separator comma js">,</span> <span class="variable other readwrite js">AlansWebComponent</span></span><span class="meta group js"><span class="punctuation section group js">)</span></span></span>
<span class="line-marker"></span>
<span class="line-marker"></span></span></code></pre>
      </div>

      <p>
        We'll dig into the details in a moment. 
        Before we do, here's a look at how it's used:
      </p>

      <h2>Basic Usage</h2>

      <p>
        The components filename is <code>component.js</code>. 
        It's included on this page via this script tag that's
        placed just before the closing <code>body</code>
        tag:
      </p>
        
      <div>
      <pre><code><span class="line-marker"></span><span class="text html basic"><span class="meta tag script begin html"><span class="punctuation definition tag begin html">&lt;</span><span class="entity name tag script html">script</span></span><span class="meta tag script begin html"> <span class="meta attribute-with-value html"><span class="entity other attribute-name html">type</span><span class="punctuation separator key-value html">=</span></span><span class="meta attribute-with-value html"><span class="string quoted double html"><span class="punctuation definition string begin html">&quot;</span>module<span class="punctuation definition string end html">&quot;</span></span></span> <span class="meta attribute-with-value html"><span class="entity other attribute-name html">src</span><span class="punctuation separator key-value html">=</span></span><span class="meta attribute-with-value html"><span class="string quoted double html"><span class="punctuation definition string begin html">&quot;</span>component.js<span class="punctuation definition string end html">&quot;</span></span></span></span><span class="meta tag script begin html"><span class="punctuation definition tag end html">&gt;</span></span><span class="source js embedded html"></span><span class="meta tag script end html"><span class="punctuation definition tag begin html">&lt;/</span><span class="entity name tag script html">script</span><span class="punctuation definition tag end html">&gt;</span></span></span></code></pre>
      </div>

      <h3>Example 1</h3>
      <p>
        The component provides a custom element named <code>aws-wc</code>. 
        (where &quot;aws&quot; stands for <em>alan w smith</em>. Not
        the web services company).
        The most basic use looks like this:
      </p>

      <div class="example-block flow">
        <h4>Code</h4>
        <pre><code><span class="line-marker"></span><span class="text html basic"><span class="meta tag custom html"><span class="punctuation definition tag begin html">&lt;</span><span class="entity name tag custom html">aws-wc</span><span class="punctuation definition tag end html">&gt;</span></span><span class="meta tag custom html"><span class="punctuation definition tag begin html">&lt;/</span><span class="entity name tag custom html">aws-wc</span><span class="punctuation definition tag end html">&gt;</span></span></span></code></pre>
        <h4>Result</h4>
        <div>
          <aws-wc></aws-wc>
        </div>
      </div>

      <p>
        The component defaults the background color 
        to <code>blue</code>. The text color is 
        inherited from the parent.
      </p>

      <h3>Example 2</h3>
      <p>
        The component is designed to do very little. The 
        idea being to keep the examples as clear as possible. 
        One feature it does have is the ability to pass
        a color to use for the background via a 
        &quot;backgroundColor&quot; attribute like this:
      </p>

      <div class="example-block flow">
        <h4>Code</h4>
        <pre><code><span class="line-marker"></span><span class="text html basic"><span class="meta tag custom html"><span class="punctuation definition tag begin html">&lt;</span><span class="entity name tag custom html">aws-wc</span>
<span class="line-marker"></span>  <span class="meta attribute-with-value html"><span class="entity other attribute-name html">backgroundColor</span><span class="punctuation separator key-value html">=</span></span><span class="meta attribute-with-value html"><span class="string quoted double html"><span class="punctuation definition string begin html">&quot;</span>red<span class="punctuation definition string end html">&quot;</span></span></span>
<span class="line-marker"></span><span class="punctuation definition tag end html">&gt;</span></span><span class="meta tag custom html"><span class="punctuation definition tag begin html">&lt;/</span><span class="entity name tag custom html">aws-wc</span><span class="punctuation definition tag end html">&gt;</span></span></span></code></pre>
        <h4>Result</h4>
        <div>
          <aws-wc
  backgroundColor="red"
></aws-wc>
        </div>
      </div>

      <h2>Using CSS Variables</h2>
      <p>
        Even better than being able to pass in explicit 
        colors is the ability to pass CSS 
        variables defined in the parent page's styles. 
      </p>

      <h3>Example 3</h3>

      <p>
        This page includes the following in it's stylesheets:
      </p>

      <div>
        <pre><code><span class="line-marker"></span><span class="source css"><span class="meta selector css"><span class="entity other pseudo-class css"><span class="punctuation definition entity css">:</span>root</span> </span><span class="meta property-list css"><span class="punctuation section property-list css">{</span>
<span class="line-marker"></span>  <span class="meta property-name css"><span class="support type custom-property css"><span class="punctuation definition custom-property css">--</span><span class="support type custom-property name css">accent-color-1</span></span></span><span class="punctuation separator key-value css">:</span><span class="meta property-value css"> </span><span class="meta property-value css"><span class="support constant color w3c-standard-color-name css">purple</span></span><span class="punctuation terminator rule css">;</span>
<span class="line-marker"></span>  <span class="meta property-name css"><span class="support type custom-property css"><span class="punctuation definition custom-property css">--</span><span class="support type custom-property name css">accent-color-2</span></span></span><span class="punctuation separator key-value css">:</span><span class="meta property-value css"> </span><span class="meta property-value css"><span class="support constant color w3c-standard-color-name css">yellow</span></span><span class="punctuation terminator rule css">;</span>
<span class="line-marker"></span>  <span class="meta property-name css"><span class="support type custom-property css"><span class="punctuation definition custom-property css">--</span><span class="support type custom-property name css">accent-color-3</span></span></span><span class="punctuation separator key-value css">:</span><span class="meta property-value css"> </span><span class="meta property-value css"><span class="support constant color w3c-standard-color-name css">red</span></span><span class="punctuation terminator rule css">;</span>
<span class="line-marker"></span></span><span class="punctuation section property-list css">}</span>
<span class="line-marker"></span></span></code></pre>
      </div>

      <p>
        <code>--accent-color-1</code> is what's used for the
        borders of the code/result example blocks
        on this page. We can set a component to use the 
        variable for its background like this:
      </p>

      <div class="example-block flow">
        <h4>Code</h4>
        <pre><code><span class="line-marker"></span><span class="text html basic"><span class="meta tag custom html"><span class="punctuation definition tag begin html">&lt;</span><span class="entity name tag custom html">aws-wc</span>
<span class="line-marker"></span>  <span class="meta attribute-with-value html"><span class="entity other attribute-name html">backgroundColor</span><span class="punctuation separator key-value html">=</span></span><span class="meta attribute-with-value html"><span class="string quoted double html"><span class="punctuation definition string begin html">&quot;</span>var(--accent-color-1)<span class="punctuation definition string end html">&quot;</span></span></span>
<span class="line-marker"></span><span class="punctuation definition tag end html">&gt;</span></span><span class="meta tag custom html"><span class="punctuation definition tag begin html">&lt;/</span><span class="entity name tag custom html">aws-wc</span><span class="punctuation definition tag end html">&gt;</span></span></span></code></pre>
        <h4>Result</h4>
        <div>
          <aws-wc
  backgroundColor="var(--accent-color-1)"
></aws-wc>
        </div>
      </div>

      <p>
        The name of the variable is passed into a function that
        builds the stylesheet for the component's 
        shadowroot. Once there, it grabs the associated
        value from the parent page's styles like
        a regular CSS variable call.
      </p>

      <h3>Example 4</h3>
      <p>
        Component instances are isolated from each 
        other. We can use different variables for 
        each one: 
      </p>

      <div class="example-block flow">
        <h4>Code</h4>
        <pre><code><span class="line-marker"></span><span class="text html basic"><span class="meta tag custom html"><span class="punctuation definition tag begin html">&lt;</span><span class="entity name tag custom html">aws-wc</span>
<span class="line-marker"></span>  <span class="meta attribute-with-value html"><span class="entity other attribute-name html">backgroundColor</span><span class="punctuation separator key-value html">=</span></span><span class="meta attribute-with-value html"><span class="string quoted double html"><span class="punctuation definition string begin html">&quot;</span>var(--accent-color-1)<span class="punctuation definition string end html">&quot;</span></span></span>
<span class="line-marker"></span><span class="punctuation definition tag end html">&gt;</span></span><span class="meta tag custom html"><span class="punctuation definition tag begin html">&lt;/</span><span class="entity name tag custom html">aws-wc</span><span class="punctuation definition tag end html">&gt;</span></span>
<span class="line-marker"></span>
<span class="line-marker"></span><span class="meta tag custom html"><span class="punctuation definition tag begin html">&lt;</span><span class="entity name tag custom html">aws-wc</span>
<span class="line-marker"></span>  <span class="meta attribute-with-value html"><span class="entity other attribute-name html">backgroundColor</span><span class="punctuation separator key-value html">=</span></span><span class="meta attribute-with-value html"><span class="string quoted double html"><span class="punctuation definition string begin html">&quot;</span>var(--accent-color-2)<span class="punctuation definition string end html">&quot;</span></span></span>
<span class="line-marker"></span><span class="punctuation definition tag end html">&gt;</span></span><span class="meta tag custom html"><span class="punctuation definition tag begin html">&lt;/</span><span class="entity name tag custom html">aws-wc</span><span class="punctuation definition tag end html">&gt;</span></span>
<span class="line-marker"></span>
<span class="line-marker"></span><span class="meta tag custom html"><span class="punctuation definition tag begin html">&lt;</span><span class="entity name tag custom html">aws-wc</span>
<span class="line-marker"></span>  <span class="meta attribute-with-value html"><span class="entity other attribute-name html">backgroundColor</span><span class="punctuation separator key-value html">=</span></span><span class="meta attribute-with-value html"><span class="string quoted double html"><span class="punctuation definition string begin html">&quot;</span>var(--accent-color-3)<span class="punctuation definition string end html">&quot;</span></span></span>
<span class="line-marker"></span><span class="punctuation definition tag end html">&gt;</span></span><span class="meta tag custom html"><span class="punctuation definition tag begin html">&lt;/</span><span class="entity name tag custom html">aws-wc</span><span class="punctuation definition tag end html">&gt;</span></span></span></code></pre>
        <h4>Result</h4>
        <div>
          <aws-wc
  backgroundColor="var(--accent-color-1)"
></aws-wc>

<aws-wc
  backgroundColor="var(--accent-color-2)"
></aws-wc>

<aws-wc
  backgroundColor="var(--accent-color-3)"
></aws-wc>
        </div>
      </div>

      <h3>Example 5</h3>

      <p>
        The same technique can be used with multiple
        styles. Here's  an instance that
        uses a <code>textColor</code> in addition to the
        <code>backgroundColor</code>:
      </p>

      <div class="example-block flow">
        <h4>Code</h4>
        <pre><code><span class="line-marker"></span><span class="text html basic"><span class="meta tag custom html"><span class="punctuation definition tag begin html">&lt;</span><span class="entity name tag custom html">aws-wc</span>
<span class="line-marker"></span>  <span class="meta attribute-with-value html"><span class="entity other attribute-name html">backgroundColor</span><span class="punctuation separator key-value html">=</span></span><span class="meta attribute-with-value html"><span class="string quoted double html"><span class="punctuation definition string begin html">&quot;</span>var(--accent-color-2)<span class="punctuation definition string end html">&quot;</span></span></span>
<span class="line-marker"></span>  <span class="meta attribute-with-value html"><span class="entity other attribute-name html">textColor</span><span class="punctuation separator key-value html">=</span></span><span class="meta attribute-with-value html"><span class="string quoted double html"><span class="punctuation definition string begin html">&quot;</span>var(--accent-color-1)<span class="punctuation definition string end html">&quot;</span></span></span>
<span class="line-marker"></span><span class="punctuation definition tag end html">&gt;</span></span><span class="meta tag custom html"><span class="punctuation definition tag begin html">&lt;/</span><span class="entity name tag custom html">aws-wc</span><span class="punctuation definition tag end html">&gt;</span></span>
<span class="line-marker"></span>
<span class="line-marker"></span><span class="meta tag custom html"><span class="punctuation definition tag begin html">&lt;</span><span class="entity name tag custom html">aws-wc</span>
<span class="line-marker"></span>  <span class="meta attribute-with-value html"><span class="entity other attribute-name html">backgroundColor</span><span class="punctuation separator key-value html">=</span></span><span class="meta attribute-with-value html"><span class="string quoted double html"><span class="punctuation definition string begin html">&quot;</span>var(--accent-color-3)<span class="punctuation definition string end html">&quot;</span></span></span>
<span class="line-marker"></span>  <span class="meta attribute-with-value html"><span class="entity other attribute-name html">textColor</span><span class="punctuation separator key-value html">=</span></span><span class="meta attribute-with-value html"><span class="string quoted double html"><span class="punctuation definition string begin html">&quot;</span>var(--accent-color-2)<span class="punctuation definition string end html">&quot;</span></span></span>
<span class="line-marker"></span><span class="punctuation definition tag end html">&gt;</span></span><span class="meta tag custom html"><span class="punctuation definition tag begin html">&lt;/</span><span class="entity name tag custom html">aws-wc</span><span class="punctuation definition tag end html">&gt;</span></span>
<span class="line-marker"></span>
<span class="line-marker"></span><span class="meta tag custom html"><span class="punctuation definition tag begin html">&lt;</span><span class="entity name tag custom html">aws-wc</span>
<span class="line-marker"></span>  <span class="meta attribute-with-value html"><span class="entity other attribute-name html">backgroundColor</span><span class="punctuation separator key-value html">=</span></span><span class="meta attribute-with-value html"><span class="string quoted double html"><span class="punctuation definition string begin html">&quot;</span>var(--accent-color-1)<span class="punctuation definition string end html">&quot;</span></span></span>
<span class="line-marker"></span>  <span class="meta attribute-with-value html"><span class="entity other attribute-name html">textColor</span><span class="punctuation separator key-value html">=</span></span><span class="meta attribute-with-value html"><span class="string quoted double html"><span class="punctuation definition string begin html">&quot;</span>var(--accent-color-3)<span class="punctuation definition string end html">&quot;</span></span></span>
<span class="line-marker"></span><span class="punctuation definition tag end html">&gt;</span></span><span class="meta tag custom html"><span class="punctuation definition tag begin html">&lt;/</span><span class="entity name tag custom html">aws-wc</span><span class="punctuation definition tag end html">&gt;</span></span></span></code></pre>
        <h4>Result</h4>
        <div>
          <aws-wc
  backgroundColor="var(--accent-color-2)"
  textColor="var(--accent-color-1)"
></aws-wc>

<aws-wc
  backgroundColor="var(--accent-color-3)"
  textColor="var(--accent-color-2)"
></aws-wc>

<aws-wc
  backgroundColor="var(--accent-color-1)"
  textColor="var(--accent-color-3)"
></aws-wc>
        </div>
      </div>

      <h2>Adding Styles To The Parent Page</h2>
      <p>
        It's time to start looking at the component file itself. 
      </p>
      <p>
        Our <code>aws-wc</code> component is designed to work as 
        an <em>display: inline-block</em> element.
        We have to 
        set that style to avoid it taking up an
        entire row. 
      </p>
      <p>
        I originally thought this
        meant having to modify the parent page's CSS directly. 
        That's not the case. We can do it in the same <code>.js</code>
        module file that contains our component by adding a 
        stylesheet outside the definition of the component's class. 
      </p>
      <p>
        Here are lines 1-7 of the <em>component.js</em> file where
        we do just that: 
      </p>

      <pre><code><span class="line-marker"></span><span class="source js"><span class="storage type js">const</span> <span class="variable other readwrite js">componentStyles</span> <span class="keyword operator assignment js">=</span> <span class="support type object dom js">document</span><span class="punctuation accessor js">.</span><span class="meta function-call method js"><span class="support function dom js">createElement</span><span class="meta group js"><span class="punctuation section group js">(</span><span class="string quoted single js"><span class="punctuation definition string begin js">&#39;</span>style<span class="punctuation definition string end js">&#39;</span></span></span><span class="meta group js"><span class="punctuation section group js">)</span></span></span>
<span class="line-marker"></span><span class="variable other object js">componentStyles</span><span class="punctuation accessor js">.</span><span class="meta property object js">innerHTML</span> <span class="keyword operator assignment js">=</span> <span class="string template js"><span class="punctuation definition string template begin js">`</span>
<span class="line-marker"></span>  aws-wc {
<span class="line-marker"></span>    display: inline-block;
<span class="line-marker"></span>  }
<span class="line-marker"></span><span class="punctuation definition string template end js">`</span></span>
<span class="line-marker"></span><span class="support type object dom js">document</span><span class="punctuation accessor js">.</span><span class="meta property object js">head</span><span class="punctuation accessor js">.</span><span class="meta function-call method js"><span class="support function dom js">appendChild</span><span class="meta group js"><span class="punctuation section group js">(</span><span class="variable other readwrite js">componentStyles</span></span><span class="meta group js"><span class="punctuation section group js">)</span></span></span></code></pre>

      <p>
        This fires when the script is loaded on the page. Since
        it's sitting outside the component definition it only
        fires once instead of each time an instance is created.
      </p>

      <h2>Passing Style Variables To The Component</h2>

      <h3>Using The ShadowDOM</h3>

      <p>
        The component is set up to use the shadowDOM with the
        <code>this.attachShadow({mode: 'open'})</code> call
        in the constructor:
      </p>

      <pre><code><span class="line-marker"></span>  <span class="meta function declaration js"><span class="entity name function js">constructor</span><span class="punctuation section group begin js">(</span><span class="punctuation section group end js">)</span><span class="meta function declaration js"> </span></span><span class="meta block js"><span class="punctuation section block js">{</span>
<span class="line-marker"></span>    <span class="meta function-call js"><span class="support function js">super</span><span class="meta group js"><span class="punctuation section group js">(</span></span><span class="meta group js"><span class="punctuation section group js">)</span></span></span>
<span class="line-marker"></span>    <span class="variable language this js">this</span><span class="punctuation accessor js">.</span><span class="meta function-call method js"><span class="variable function js">attachShadow</span><span class="meta group js"><span class="punctuation section group js">(</span><span class="meta object-literal js"><span class="punctuation section block js">{</span><span class="meta object-literal key js">mode</span><span class="punctuation separator key-value js">:</span> <span class="string quoted single js"><span class="punctuation definition string begin js">&#39;</span>open<span class="punctuation definition string end js">&#39;</span></span><span class="punctuation section block js">}</span></span></span><span class="meta group js"><span class="punctuation section group js">)</span></span></span>
<span class="line-marker"></span>  <span class="punctuation section block js">}</span></span></code></pre>

      <h3>Getting The Attribute Values</h3>

      <p>
        Pulling style variables (or, explicit values) in from
        a custom tag's attributes takes a few steps. The first
        thing is to add a function to the component's 
        <code>connectedCallback()</code> to grab the values
        from the attributes. Here's the code where I'm calling
        a <code>this.getColors()</code> function to do that:
      </p>

      <pre><code><span class="line-marker"></span>  <span class="meta function declaration js"><span class="entity name function js">connectedCallback</span><span class="punctuation section group begin js">(</span><span class="punctuation section group end js">)</span><span class="meta function declaration js"> </span></span><span class="meta block js"><span class="punctuation section block js">{</span>
<span class="line-marker"></span>    <span class="variable language this js">this</span><span class="punctuation accessor js">.</span><span class="meta function-call method js"><span class="variable function js">getColors</span><span class="meta group js"><span class="punctuation section group js">(</span></span><span class="meta group js"><span class="punctuation section group js">)</span></span></span>
<span class="line-marker"></span>    <span class="variable language this js">this</span><span class="punctuation accessor js">.</span><span class="meta property object js">shadowRoot</span><span class="punctuation accessor js">.</span><span class="meta function-call method js"><span class="variable function js">append</span><span class="meta group js"><span class="punctuation section group js">(</span><span class="variable language this js">this</span><span class="punctuation accessor js">.</span><span class="meta function-call method js"><span class="variable function js">styles</span><span class="meta group js"><span class="punctuation section group js">(</span></span><span class="meta group js"><span class="punctuation section group js">)</span></span></span></span><span class="meta group js"><span class="punctuation section group js">)</span></span></span>
<span class="line-marker"></span>    <span class="storage type js">const</span> <span class="variable other readwrite js">contents</span> <span class="keyword operator assignment js">=</span> 
<span class="line-marker"></span>      <span class="variable language this js">this</span><span class="punctuation accessor js">.</span><span class="meta function-call method js"><span class="variable function js">template</span><span class="meta group js"><span class="punctuation section group js">(</span></span><span class="meta group js"><span class="punctuation section group js">)</span></span></span><span class="punctuation accessor js">.</span><span class="meta property object js">content</span><span class="punctuation accessor js">.</span><span class="meta function-call method js"><span class="support function dom js">cloneNode</span><span class="meta group js"><span class="punctuation section group js">(</span><span class="constant language boolean true js">true</span></span><span class="meta group js"><span class="punctuation section group js">)</span></span></span>
<span class="line-marker"></span>    <span class="variable language this js">this</span><span class="punctuation accessor js">.</span><span class="meta property object js">shadowRoot</span><span class="punctuation accessor js">.</span><span class="meta function-call method js"><span class="variable function js">append</span><span class="meta group js"><span class="punctuation section group js">(</span><span class="variable other readwrite js">contents</span></span><span class="meta group js"><span class="punctuation section group js">)</span></span></span>
<span class="line-marker"></span>  <span class="punctuation section block js">}</span></span></code></pre>

      <p>
        The <code>getColors()</code> function looks like this:
      </p>

      <pre><code><span class="line-marker"></span>  <span class="meta function declaration js"><span class="entity name function js">getColors</span><span class="punctuation section group begin js">(</span><span class="punctuation section group end js">)</span><span class="meta function declaration js"> </span></span><span class="meta block js"><span class="punctuation section block js">{</span>
<span class="line-marker"></span>    <span class="variable language this js">this</span><span class="punctuation accessor js">.</span><span class="meta property object js">backgroundColor</span> <span class="keyword operator assignment js">=</span> 
<span class="line-marker"></span>      <span class="variable language this js">this</span><span class="punctuation accessor js">.</span><span class="meta function-call method js"><span class="support function dom js">getAttribute</span><span class="meta group js"><span class="punctuation section group js">(</span><span class="string quoted single js"><span class="punctuation definition string begin js">&#39;</span>backgroundColor<span class="punctuation definition string end js">&#39;</span></span></span><span class="meta group js"><span class="punctuation section group js">)</span></span></span> 
<span class="line-marker"></span>      <span class="keyword operator ternary js">?</span> <span class="variable language this js">this</span><span class="punctuation accessor js">.</span><span class="meta function-call method js"><span class="support function dom js">getAttribute</span><span class="meta group js"><span class="punctuation section group js">(</span><span class="string quoted single js"><span class="punctuation definition string begin js">&#39;</span>backgroundColor<span class="punctuation definition string end js">&#39;</span></span></span><span class="meta group js"><span class="punctuation section group js">)</span></span></span> 
<span class="line-marker"></span>      <span class="keyword operator ternary js">:</span> <span class="string quoted single js"><span class="punctuation definition string begin js">&#39;</span>blue<span class="punctuation definition string end js">&#39;</span></span>
<span class="line-marker"></span>    <span class="variable language this js">this</span><span class="punctuation accessor js">.</span><span class="meta property object js">textColor</span> <span class="keyword operator assignment js">=</span> 
<span class="line-marker"></span>      <span class="variable language this js">this</span><span class="punctuation accessor js">.</span><span class="meta function-call method js"><span class="support function dom js">getAttribute</span><span class="meta group js"><span class="punctuation section group js">(</span><span class="string quoted single js"><span class="punctuation definition string begin js">&#39;</span>textColor<span class="punctuation definition string end js">&#39;</span></span></span><span class="meta group js"><span class="punctuation section group js">)</span></span></span> 
<span class="line-marker"></span>      <span class="keyword operator ternary js">?</span> <span class="variable language this js">this</span><span class="punctuation accessor js">.</span><span class="meta function-call method js"><span class="support function dom js">getAttribute</span><span class="meta group js"><span class="punctuation section group js">(</span><span class="string quoted single js"><span class="punctuation definition string begin js">&#39;</span>textColor<span class="punctuation definition string end js">&#39;</span></span></span><span class="meta group js"><span class="punctuation section group js">)</span></span></span> 
<span class="line-marker"></span>      <span class="keyword operator ternary js">:</span> <span class="string quoted single js"><span class="punctuation definition string begin js">&#39;</span>inherit<span class="punctuation definition string end js">&#39;</span></span>
<span class="line-marker"></span>  <span class="punctuation section block js">}</span></span></code></pre>

      <p>
        The code checks to see if the color attributes
        exist in the custom element. They get used if they do.
        Otherwise, a default fallback is used.
      </p>

      <h3>Applying The Styles</h3>

      <p>
        The internal stylesheet for the component is
        generated by the <code>styles()</code> function:
      </p>

      <pre><code><span class="line-marker"></span>  <span class="meta function declaration js"><span class="entity name function js">styles</span><span class="punctuation section group begin js">(</span><span class="punctuation section group end js">)</span><span class="meta function declaration js"> </span></span><span class="meta block js"><span class="punctuation section block js">{</span>
<span class="line-marker"></span>    <span class="storage type js">const</span> <span class="variable other readwrite js">styles</span> <span class="keyword operator assignment js">=</span> <span class="support type object dom js">document</span><span class="punctuation accessor js">.</span><span class="meta function-call method js"><span class="support function dom js">createElement</span><span class="meta group js"><span class="punctuation section group js">(</span><span class="string quoted single js"><span class="punctuation definition string begin js">&#39;</span>style<span class="punctuation definition string end js">&#39;</span></span></span><span class="meta group js"><span class="punctuation section group js">)</span></span></span>
<span class="line-marker"></span>    <span class="variable other object js">styles</span><span class="punctuation accessor js">.</span><span class="meta property object js">innerHTML</span> <span class="keyword operator assignment js">=</span> <span class="string template js"><span class="punctuation definition string template begin js">`</span>
<span class="line-marker"></span>      div {
<span class="line-marker"></span>        background: </span><span class="meta template expression js"><span class="punctuation definition template-expression begin js">${</span></span><span class="meta template expression js"><span class="source js embedded expression"><span class="variable language this js">this</span><span class="punctuation accessor js">.</span><span class="meta property object js">backgroundColor</span></span><span class="punctuation definition template-expression end js">}</span></span><span class="string template js">;
<span class="line-marker"></span>        border-radius: 0.4rem;
<span class="line-marker"></span>        color: </span><span class="meta template expression js"><span class="punctuation definition template-expression begin js">${</span></span><span class="meta template expression js"><span class="source js embedded expression"><span class="variable language this js">this</span><span class="punctuation accessor js">.</span><span class="meta property object js">textColor</span></span><span class="punctuation definition template-expression end js">}</span></span><span class="string template js">;
<span class="line-marker"></span>        padding: 0.3rem;
<span class="line-marker"></span>      }
<span class="line-marker"></span>    <span class="punctuation definition string template end js">`</span></span>
<span class="line-marker"></span>    <span class="keyword control flow js">return</span> <span class="variable other readwrite js">styles</span> </code></pre>

      <p>
        It uses the <code>this.backgroundColor</code> and
        <code>this.textColor</code> variables defined by
        the <code>getColors()</code> function. They are
        written in as string which is what allows them
        to accept CSS variable names. There's no difference
        to the component compared to hard coding the 
        variable names.
      <p>

      <p>
        The styles are added to the shadowroot from the 
        <code>connectedCallback()</code> function with:
      </p>

      <pre><code><span class="line-marker"></span>    <span class="variable language this js">this</span><span class="punctuation accessor js">.</span><span class="meta property object js">shadowRoot</span><span class="punctuation accessor js">.</span><span class="meta function-call method js"><span class="variable function js">append</span><span class="meta group js"><span class="punctuation section group js">(</span><span class="variable language this js">this</span><span class="punctuation accessor js">.</span><span class="meta function-call method js"><span class="variable function js">styles</span><span class="meta group js"><span class="punctuation section group js">(</span></span><span class="meta group js"><span class="punctuation section group js">)</span></span></span></span><span class="meta group js"><span class="punctuation section group js">)</span></span></span></code></pre>

      <h3>Adding The Content</h3>

      <p>
        The main content for component is defined in the
        <code>template()</code> function:
      </p>

      <pre><code><span class="line-marker"></span>  <span class="meta function declaration js"><span class="entity name function js">template</span><span class="punctuation section group begin js">(</span><span class="punctuation section group end js">)</span><span class="meta function declaration js"> </span></span><span class="meta block js"><span class="punctuation section block js">{</span>
<span class="line-marker"></span>    <span class="storage type js">const</span> <span class="variable other readwrite js">template</span> <span class="keyword operator assignment js">=</span> 
<span class="line-marker"></span>      <span class="variable language this js">this</span><span class="punctuation accessor js">.</span><span class="meta property object js">ownerDocument</span><span class="punctuation accessor js">.</span><span class="meta function-call method js"><span class="support function dom js">createElement</span><span class="meta group js"><span class="punctuation section group js">(</span><span class="string quoted single js"><span class="punctuation definition string begin js">&#39;</span>template<span class="punctuation definition string end js">&#39;</span></span></span><span class="meta group js"><span class="punctuation section group js">)</span></span></span>
<span class="line-marker"></span>    <span class="variable other object js">template</span><span class="punctuation accessor js">.</span><span class="meta property object js">innerHTML</span> <span class="keyword operator assignment js">=</span> <span class="string template js"><span class="punctuation definition string template begin js">`</span>&lt;div&gt;Ping&lt;/div&gt;<span class="punctuation definition string template end js">`</span></span>
<span class="line-marker"></span>    <span class="keyword control flow js">return</span> <span class="variable other readwrite js">template</span> 
<span class="line-marker"></span>  <span class="punctuation section block js">}</span></span></code></pre>







    </main>

    <footer>
      <div>
        made by <a href="https://www.alanwsmith.com/">alan w smith</a>
      </div>
      <div>
        <a href="https://github.com/alanwsmith/web-component-techniques.alanwsmith.com">source code</a> ~
        <a href="https://links.alanwsmith.com/">other projects</a> ~
        <a href="https://socials.alanwsmith.com/">socials</a>
      </div>
    </footer>

    <script type="module" src="component.js"></script>

  </body>
</html>
