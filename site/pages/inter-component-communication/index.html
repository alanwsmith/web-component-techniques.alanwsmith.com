<!DOCTYPE html>

<!--

#######################################################

REMINDER: Don't edit pages directly. They are
created by the site builder. Any changes you make to
them manually will be overwritten.

#######################################################

-->


<html lang="en">
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="apple-touch-icon" sizes="180x180" href="/favicons/apple-touch-icon.png" />
    <link rel="icon" type="image/png" sizes="32x32" href="/favicons/favicon-32x32.png" />
    <link rel="icon" type="image/png" sizes="16x16" href="/favicons/favicon-16x16.png" />
    <link rel="manifest" href="/favicons/site.webmanifest" />
    <link rel="mask-icon" href="/favicons/safari-pinned-tab.svg" color="#5bbad5" />
    <link rel="shortcut icon" href="/favicons/favicon.ico" />
    <meta name="msapplication-TileColor" content="#da532c" />
    <meta name="msapplication-config" content="/favicons/browserconfig.xml" />
    <meta name="theme-color" content="#000000" />

    <title>Inter-Component Communication - Alan's Web Component Techniques</title>
    <meta name="description" content="Getting web components to communicate with each other" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta property="og:description" content="Getting web components to communicate with each other" />
    <meta property="og:title" content="Inter-Component Communication - Alan's Web Component Techniques" />
    <meta property="og:url" content="https://web-component-techniques.alanwsmith.com/pages/inter-component-communication/" />
    <meta property="og:image" content="https://web-component-techniques.alanwsmith.com/images/og-image.jpg" />
    <link rel="stylesheet" href="/styles/main.css" />
    <link rel="stylesheet" href="/styles/code-solarized-dark.css" />
    <link rel="stylesheet" href="styles.css" />

    
<link rel="stylesheet" href="styles.css" />

  </head>
 
  <body>
    <header>
      <a href="/">Techniques Home</a> ~
      <a href="https://www.alanwsmith.com/">alanwsmith.com</a> ~
      <a href="https://links.alanwsmith.com/">other projects</a> ~
      <a href="https://socials.alanwsmith.com/">socials</a>
    </header>

    <main class="flow"> 
      <hgroup>
        <h1>Inter-Component Communication</h1>
        <p>January 2025</p>
      </hgroup>

      

<div class="example-block flow">
<h2>Work In Progress</h2>

<p>
  This is a draft post. Any feedback
  or ideas for improvement are welcome.
</p>
</div>

<h2>Introduction</h2>

<p>
  This page presents a method to
  allow multiple instances of a 
  web component to communicate with
  each other.
</p>

<h2>Code Example</h2>

<p>
  Here's a full example of a 
  <code>component.js</code> file designed
  to allow instances of web components
  to communicate with each other.
  (It's also what powers the examples
  on this page.)
</p>

<pre><code><span class="line-marker"></span><span class="source js"><span class="meta class js"><span class="storage type class js">class</span> <span class="entity name class js">AlansWebComponent</span> <span class="storage modifier extends js">extends</span> <span class="entity other inherited-class js">HTMLElement</span> <span class="meta class js"><span class="meta block js"><span class="punctuation section block js">{</span></span></span></span><span class="meta class js"><span class="meta block js">
<span class="line-marker"></span>
<span class="line-marker"></span>  <span class="meta function declaration js"><span class="storage type js">static</span> <span class="entity name function js">count</span><span class="meta function declaration js"> </span></span>= 0
<span class="line-marker"></span>  <span class="meta function declaration js"><span class="storage type js">static</span> <span class="entity name function js">instances</span><span class="meta function declaration js"> </span></span>= {<span class="punctuation section block js">}</span></span></span>
<span class="line-marker"></span>
<span class="line-marker"></span>  <span class="variable other readwrite js">static</span> <span class="meta function-call js"><span class="variable function js">increment</span><span class="meta group js"><span class="punctuation section group js">(</span><span class="variable other readwrite js">instance</span></span><span class="meta group js"><span class="punctuation section group js">)</span></span></span> <span class="meta block js"><span class="punctuation section block js">{</span>
<span class="line-marker"></span>    <span class="variable language this js">this</span><span class="punctuation accessor js">.</span><span class="meta property object js">count</span> <span class="keyword operator assignment augmented js">+=</span> <span class="constant numeric js">1</span>
<span class="line-marker"></span>    <span class="meta for js"><span class="keyword control loop js">for</span> <span class="meta group js"><span class="punctuation section group js">(</span><span class="storage type js">let</span> <span class="variable other readwrite js">checkId</span> <span class="keyword operator js">in</span> <span class="variable language this js">this</span><span class="punctuation accessor js">.</span><span class="meta property object js">instances</span><span class="punctuation section group js">)</span></span> <span class="meta block js"><span class="punctuation section block js">{</span>
<span class="line-marker"></span>      <span class="meta conditional js"><span class="keyword control conditional js">if</span> <span class="meta group js"><span class="punctuation section group js">(</span><span class="variable other readwrite js">checkId</span> <span class="keyword operator comparison js">===</span> <span class="variable other object js">instance</span><span class="punctuation accessor js">.</span><span class="meta property object js">uuid</span><span class="punctuation section group js">)</span></span> <span class="meta block js"><span class="punctuation section block js">{</span>
<span class="line-marker"></span>        <span class="variable language this js">this</span><span class="punctuation accessor js">.</span><span class="meta property object js">instances</span><span class="meta brackets js"><span class="punctuation section brackets js">[</span><span class="variable other readwrite js">checkId</span><span class="punctuation section brackets js">]</span></span><span class="punctuation accessor js">.</span><span class="meta function-call method js"><span class="variable function js">update</span><span class="meta group js"><span class="punctuation section group js">(</span><span class="variable language this js">this</span><span class="punctuation accessor js">.</span><span class="meta property object js">count</span></span><span class="meta group js"><span class="punctuation section group js">)</span></span></span>
<span class="line-marker"></span>      </span><span class="meta block js"><span class="punctuation section block js">}</span></span></span> <span class="meta conditional js"><span class="keyword control conditional js">else</span> <span class="meta block js"><span class="punctuation section block js">{</span>
<span class="line-marker"></span>        <span class="variable language this js">this</span><span class="punctuation accessor js">.</span><span class="meta property object js">instances</span><span class="meta brackets js"><span class="punctuation section brackets js">[</span><span class="variable other readwrite js">checkId</span><span class="punctuation section brackets js">]</span></span><span class="punctuation accessor js">.</span><span class="meta function-call method js"><span class="variable function js">update</span><span class="meta group js"><span class="punctuation section group js">(</span><span class="string quoted double js"><span class="punctuation definition string begin js">&quot;</span>-<span class="punctuation definition string end js">&quot;</span></span></span><span class="meta group js"><span class="punctuation section group js">)</span></span></span>
<span class="line-marker"></span>      </span><span class="meta block js"><span class="punctuation section block js">}</span></span></span>
<span class="line-marker"></span>    </span><span class="meta block js"><span class="punctuation section block js">}</span></span></span>
<span class="line-marker"></span>  <span class="punctuation section block js">}</span></span>
<span class="line-marker"></span>
<span class="line-marker"></span>  <span class="variable other readwrite js">static</span> <span class="meta function-call js"><span class="variable function js">registerInstance</span><span class="meta group js"><span class="punctuation section group js">(</span><span class="variable other readwrite js">instance</span></span><span class="meta group js"><span class="punctuation section group js">)</span></span></span> <span class="meta block js"><span class="punctuation section block js">{</span>
<span class="line-marker"></span>    <span class="variable language this js">this</span><span class="punctuation accessor js">.</span><span class="meta property object js">instances</span><span class="meta brackets js"><span class="punctuation section brackets js">[</span><span class="variable other object js">instance</span><span class="punctuation accessor js">.</span><span class="meta property object js">uuid</span><span class="punctuation section brackets js">]</span></span> <span class="keyword operator assignment js">=</span> <span class="variable other readwrite js">instance</span>
<span class="line-marker"></span>  <span class="punctuation section block js">}</span></span>
<span class="line-marker"></span>
<span class="line-marker"></span>  <span class="variable other readwrite js">static</span> <span class="meta function-call js"><span class="variable function js">removeInstance</span><span class="meta group js"><span class="punctuation section group js">(</span><span class="variable other readwrite js">instance</span></span><span class="meta group js"><span class="punctuation section group js">)</span></span></span> <span class="meta block js"><span class="punctuation section block js">{</span>
<span class="line-marker"></span>    <span class="keyword operator js">delete</span> <span class="variable language this js">this</span><span class="punctuation accessor js">.</span><span class="meta property object js">instances</span><span class="meta brackets js"><span class="punctuation section brackets js">[</span><span class="variable other object js">instance</span><span class="punctuation accessor js">.</span><span class="meta property object js">uuid</span><span class="punctuation section brackets js">]</span></span>
<span class="line-marker"></span>  <span class="punctuation section block js">}</span></span>
<span class="line-marker"></span>
<span class="line-marker"></span>  <span class="meta function-call js"><span class="variable function js">constructor</span><span class="meta group js"><span class="punctuation section group js">(</span></span><span class="meta group js"><span class="punctuation section group js">)</span></span></span> <span class="meta block js"><span class="punctuation section block js">{</span>
<span class="line-marker"></span>    <span class="meta function-call js"><span class="support function js">super</span><span class="meta group js"><span class="punctuation section group js">(</span></span><span class="meta group js"><span class="punctuation section group js">)</span></span></span>
<span class="line-marker"></span>    <span class="variable language this js">this</span><span class="punctuation accessor js">.</span><span class="meta property object js">uuid</span> <span class="keyword operator assignment js">=</span> <span class="variable language self js">self</span><span class="punctuation accessor js">.</span><span class="meta property object js">crypto</span><span class="punctuation accessor js">.</span><span class="meta function-call method js"><span class="variable function js">randomUUID</span><span class="meta group js"><span class="punctuation section group js">(</span></span><span class="meta group js"><span class="punctuation section group js">)</span></span></span>
<span class="line-marker"></span>    <span class="variable language this js">this</span><span class="punctuation accessor js">.</span><span class="meta function-call method js"><span class="variable function js">attachShadow</span><span class="meta group js"><span class="punctuation section group js">(</span><span class="meta object-literal js"><span class="punctuation section block js">{</span><span class="meta object-literal key js">mode</span><span class="punctuation separator key-value js">:</span> <span class="string quoted single js"><span class="punctuation definition string begin js">&#39;</span>open<span class="punctuation definition string end js">&#39;</span></span><span class="punctuation section block js">}</span></span></span><span class="meta group js"><span class="punctuation section group js">)</span></span></span>
<span class="line-marker"></span>  <span class="punctuation section block js">}</span></span>
<span class="line-marker"></span>
<span class="line-marker"></span>  <span class="meta function-call js"><span class="variable function js">addContent</span><span class="meta group js"><span class="punctuation section group js">(</span></span><span class="meta group js"><span class="punctuation section group js">)</span></span></span> <span class="meta block js"><span class="punctuation section block js">{</span>
<span class="line-marker"></span>    <span class="storage type js">const</span> <span class="variable other readwrite js">template</span> <span class="keyword operator assignment js">=</span> 
<span class="line-marker"></span>      <span class="variable language this js">this</span><span class="punctuation accessor js">.</span><span class="meta property object js">ownerDocument</span><span class="punctuation accessor js">.</span><span class="meta function-call method js"><span class="support function dom js">createElement</span><span class="meta group js"><span class="punctuation section group js">(</span><span class="string quoted single js"><span class="punctuation definition string begin js">&#39;</span>template<span class="punctuation definition string end js">&#39;</span></span></span><span class="meta group js"><span class="punctuation section group js">)</span></span></span>
<span class="line-marker"></span>    <span class="variable other object js">template</span><span class="punctuation accessor js">.</span><span class="meta property object js">innerHTML</span> <span class="keyword operator assignment js">=</span> <span class="string template js"><span class="punctuation definition string template begin js">`</span>&lt;button&gt;-&lt;/button&gt;<span class="punctuation definition string template end js">`</span></span>
<span class="line-marker"></span>    <span class="storage type js">const</span> <span class="variable other readwrite js">content</span> <span class="keyword operator assignment js">=</span> 
<span class="line-marker"></span>      <span class="variable other object js">template</span><span class="punctuation accessor js">.</span><span class="meta property object js">content</span><span class="punctuation accessor js">.</span><span class="meta function-call method js"><span class="support function dom js">cloneNode</span><span class="meta group js"><span class="punctuation section group js">(</span><span class="constant language boolean true js">true</span></span><span class="meta group js"><span class="punctuation section group js">)</span></span></span>
<span class="line-marker"></span>    <span class="variable language this js">this</span><span class="punctuation accessor js">.</span><span class="meta property object js">shadowRoot</span><span class="punctuation accessor js">.</span><span class="meta function-call method js"><span class="variable function js">append</span><span class="meta group js"><span class="punctuation section group js">(</span><span class="variable other readwrite js">content</span></span><span class="meta group js"><span class="punctuation section group js">)</span></span></span>
<span class="line-marker"></span>  <span class="punctuation section block js">}</span></span>
<span class="line-marker"></span>
<span class="line-marker"></span>  <span class="meta function-call js"><span class="variable function js">addEventListeners</span><span class="meta group js"><span class="punctuation section group js">(</span></span><span class="meta group js"><span class="punctuation section group js">)</span></span></span> <span class="meta block js"><span class="punctuation section block js">{</span>
<span class="line-marker"></span>    <span class="variable language this js">this</span><span class="punctuation accessor js">.</span><span class="meta property object js">button</span> <span class="keyword operator assignment js">=</span> <span class="variable language this js">this</span><span class="punctuation accessor js">.</span><span class="meta property object js">shadowRoot</span><span class="punctuation accessor js">.</span><span class="meta function-call method js"><span class="variable function js">querySelector</span><span class="meta group js"><span class="punctuation section group js">(</span><span class="string quoted single js"><span class="punctuation definition string begin js">&#39;</span>button<span class="punctuation definition string end js">&#39;</span></span></span><span class="meta group js"><span class="punctuation section group js">)</span></span></span>
<span class="line-marker"></span>    <span class="variable language this js">this</span><span class="punctuation accessor js">.</span><span class="meta property object js">button</span><span class="punctuation accessor js">.</span><span class="meta function-call method js"><span class="variable function js">addEventListener</span><span class="meta group js"><span class="punctuation section group js">(</span><span class="string quoted single js"><span class="punctuation definition string begin js">&#39;</span>click<span class="punctuation definition string end js">&#39;</span></span><span class="punctuation separator comma js">,</span> <span class="meta function declaration js"><span class="punctuation section group begin js">(</span><span class="variable parameter function js">event</span><span class="punctuation section group end js">)</span><span class="meta function declaration js"> </span><span class="storage type function arrow js">=&gt;</span></span> <span class="meta block js"><span class="punctuation section block js">{</span>
<span class="line-marker"></span>      <span class="variable language this js">this</span><span class="punctuation accessor js">.</span><span class="meta property object js">handleClick</span><span class="punctuation accessor js">.</span><span class="meta function-call method js"><span class="variable function js">call</span><span class="meta group js"><span class="punctuation section group js">(</span><span class="variable language this js">this</span><span class="punctuation separator comma js">,</span> <span class="variable other readwrite js">event</span></span><span class="meta group js"><span class="punctuation section group js">)</span></span></span> 
<span class="line-marker"></span>    <span class="punctuation section block js">}</span></span></span><span class="meta group js"><span class="punctuation section group js">)</span></span></span>
<span class="line-marker"></span>  <span class="punctuation section block js">}</span></span>
<span class="line-marker"></span>
<span class="line-marker"></span>  <span class="meta function-call js"><span class="variable function js">connectedCallback</span><span class="meta group js"><span class="punctuation section group js">(</span></span><span class="meta group js"><span class="punctuation section group js">)</span></span></span> <span class="meta block js"><span class="punctuation section block js">{</span>
<span class="line-marker"></span>    <span class="variable language this js">this</span><span class="punctuation accessor js">.</span><span class="variable language constructor js">constructor</span><span class="punctuation accessor js">.</span><span class="meta function-call method js"><span class="variable function js">registerInstance</span><span class="meta group js"><span class="punctuation section group js">(</span><span class="variable language this js">this</span></span><span class="meta group js"><span class="punctuation section group js">)</span></span></span>
<span class="line-marker"></span>    <span class="variable language this js">this</span><span class="punctuation accessor js">.</span><span class="meta function-call method js"><span class="variable function js">addContent</span><span class="meta group js"><span class="punctuation section group js">(</span></span><span class="meta group js"><span class="punctuation section group js">)</span></span></span>
<span class="line-marker"></span>    <span class="variable language this js">this</span><span class="punctuation accessor js">.</span><span class="meta function-call method js"><span class="variable function js">addEventListeners</span><span class="meta group js"><span class="punctuation section group js">(</span></span><span class="meta group js"><span class="punctuation section group js">)</span></span></span>
<span class="line-marker"></span>  <span class="punctuation section block js">}</span></span>
<span class="line-marker"></span>
<span class="line-marker"></span>  <span class="meta function-call js"><span class="variable function js">disconnectedCallback</span><span class="meta group js"><span class="punctuation section group js">(</span></span><span class="meta group js"><span class="punctuation section group js">)</span></span></span> <span class="meta block js"><span class="punctuation section block js">{</span>
<span class="line-marker"></span>    <span class="variable language this js">this</span><span class="punctuation accessor js">.</span><span class="variable language constructor js">constructor</span><span class="punctuation accessor js">.</span><span class="meta function-call method js"><span class="variable function js">removeInstance</span><span class="meta group js"><span class="punctuation section group js">(</span><span class="variable language this js">this</span></span><span class="meta group js"><span class="punctuation section group js">)</span></span></span>
<span class="line-marker"></span>  <span class="punctuation section block js">}</span></span>
<span class="line-marker"></span>
<span class="line-marker"></span>  <span class="meta function-call js"><span class="variable function js">handleClick</span><span class="meta group js"><span class="punctuation section group js">(</span><span class="variable other readwrite js">event</span></span><span class="meta group js"><span class="punctuation section group js">)</span></span></span> <span class="meta block js"><span class="punctuation section block js">{</span>
<span class="line-marker"></span>    <span class="variable language this js">this</span><span class="punctuation accessor js">.</span><span class="variable language constructor js">constructor</span><span class="punctuation accessor js">.</span><span class="meta function-call method js"><span class="variable function js">increment</span><span class="meta group js"><span class="punctuation section group js">(</span><span class="variable language this js">this</span></span><span class="meta group js"><span class="punctuation section group js">)</span></span></span>
<span class="line-marker"></span>  <span class="punctuation section block js">}</span></span>
<span class="line-marker"></span>
<span class="line-marker"></span>  <span class="meta function-call js"><span class="variable function js">update</span><span class="meta group js"><span class="punctuation section group js">(</span><span class="variable other readwrite js">value</span></span><span class="meta group js"><span class="punctuation section group js">)</span></span></span> <span class="meta block js"><span class="punctuation section block js">{</span>
<span class="line-marker"></span>    <span class="variable language this js">this</span><span class="punctuation accessor js">.</span><span class="meta property object js">button</span><span class="punctuation accessor js">.</span><span class="meta property object js">innerHTML</span> <span class="keyword operator assignment js">=</span> <span class="variable other readwrite js">value</span>
<span class="line-marker"></span>  <span class="punctuation section block js">}</span></span>
<span class="line-marker"></span>}
<span class="line-marker"></span>
<span class="line-marker"></span><span class="variable other object js">customElements</span><span class="punctuation accessor js">.</span><span class="meta function-call method js"><span class="variable function js">define</span><span class="meta group js"><span class="punctuation section group js">(</span><span class="string quoted single js"><span class="punctuation definition string begin js">&#39;</span>alans-wc<span class="punctuation definition string end js">&#39;</span></span><span class="punctuation separator comma js">,</span> <span class="variable other readwrite js">AlansWebComponent</span></span><span class="meta group js"><span class="punctuation section group js">)</span></span></span>
<span class="line-marker"></span></span></code></pre>

<p>
  The script is included on the page
  via:
</p>

<pre><code><span class="line-marker"></span><span class="text html basic"><span class="meta tag script begin html"><span class="punctuation definition tag begin html">&lt;</span><span class="entity name tag script html">script</span></span><span class="meta tag script begin html"> <span class="meta attribute-with-value html"><span class="entity other attribute-name html">type</span><span class="punctuation separator key-value html">=</span></span><span class="meta attribute-with-value html"><span class="string quoted double html"><span class="punctuation definition string begin html">&quot;</span>module<span class="punctuation definition string end html">&quot;</span></span></span> <span class="meta attribute-with-value html"><span class="entity other attribute-name html">src</span><span class="punctuation separator key-value html">=</span></span><span class="meta attribute-with-value html"><span class="string quoted double html"><span class="punctuation definition string begin html">&quot;</span>component.js<span class="punctuation definition string end html">&quot;</span></span></span></span><span class="meta tag script begin html"><span class="punctuation definition tag end html">&gt;</span></span><span class="source js embedded html"></span><span class="meta tag script end html"><span class="punctuation definition tag begin html">&lt;/</span><span class="entity name tag script html">script</span><span class="punctuation definition tag end html">&gt;</span></span></span></code></pre>


<h2>Example</h2>

<p>
  Four instances of the component are included here. 
  Clicking one of them increments a global counter 
  and displays the number. All the other instances
  of the component are set to display a dash.
</p>

<div class="example-block flow">
  <h3>Code</h3>
<pre><code><span class="line-marker"></span><span class="text html basic"><span class="meta tag custom html"><span class="punctuation definition tag begin html">&lt;</span><span class="entity name tag custom html">alans-wc</span><span class="punctuation definition tag end html">&gt;</span></span><span class="meta tag custom html"><span class="punctuation definition tag begin html">&lt;/</span><span class="entity name tag custom html">alans-wc</span><span class="punctuation definition tag end html">&gt;</span></span>
<span class="line-marker"></span><span class="meta tag custom html"><span class="punctuation definition tag begin html">&lt;</span><span class="entity name tag custom html">alans-wc</span><span class="punctuation definition tag end html">&gt;</span></span><span class="meta tag custom html"><span class="punctuation definition tag begin html">&lt;/</span><span class="entity name tag custom html">alans-wc</span><span class="punctuation definition tag end html">&gt;</span></span>
<span class="line-marker"></span><span class="meta tag custom html"><span class="punctuation definition tag begin html">&lt;</span><span class="entity name tag custom html">alans-wc</span><span class="punctuation definition tag end html">&gt;</span></span><span class="meta tag custom html"><span class="punctuation definition tag begin html">&lt;/</span><span class="entity name tag custom html">alans-wc</span><span class="punctuation definition tag end html">&gt;</span></span>
<span class="line-marker"></span><span class="meta tag custom html"><span class="punctuation definition tag begin html">&lt;</span><span class="entity name tag custom html">alans-wc</span><span class="punctuation definition tag end html">&gt;</span></span><span class="meta tag custom html"><span class="punctuation definition tag begin html">&lt;/</span><span class="entity name tag custom html">alans-wc</span><span class="punctuation definition tag end html">&gt;</span></span></span></code></pre>
  <h3>Result</h3>
  <div>
<alans-wc></alans-wc>
<alans-wc></alans-wc>
<alans-wc></alans-wc>
<alans-wc></alans-wc>
  </div>
</div>


<h2>Details</h2>

<h3>The Static Variables And Methods</h3>

<p>
  This approach works by creating two static
  variables that act as a global counter and
  list of associated elements. 
</p>

<pre><code><span class="line-marker"></span>  <span class="meta function declaration js"><span class="storage type js">static</span> <span class="entity name function js">count</span><span class="meta function declaration js"> </span></span>= 0
<span class="line-marker"></span>  <span class="meta function declaration js"><span class="storage type js">static</span> <span class="entity name function js">instances</span><span class="meta function declaration js"> </span></span>= {<span class="punctuation section block js">}</span></span></span></code></pre>

<p> 
  Three static methods provide the core functionality.
  The <code>registerInstance()</code> method receives an instance
  of the component and adds it to the <code>instances</code>
  object using its UUID as the key.
</p>

<pre><code><span class="line-marker"></span>  <span class="variable other readwrite js">static</span> <span class="meta function-call js"><span class="variable function js">registerInstance</span><span class="meta group js"><span class="punctuation section group js">(</span><span class="variable other readwrite js">instance</span></span><span class="meta group js"><span class="punctuation section group js">)</span></span></span> <span class="meta block js"><span class="punctuation section block js">{</span>
<span class="line-marker"></span>    <span class="variable language this js">this</span><span class="punctuation accessor js">.</span><span class="meta property object js">instances</span><span class="meta brackets js"><span class="punctuation section brackets js">[</span><span class="variable other object js">instance</span><span class="punctuation accessor js">.</span><span class="meta property object js">uuid</span><span class="punctuation section brackets js">]</span></span> <span class="keyword operator assignment js">=</span> <span class="variable other readwrite js">instance</span>
<span class="line-marker"></span>  <span class="punctuation section block js">}</span></span></code></pre>



<p>
  The <code>increment</code> method increments a counter
  then searches through the <code>instances</code>
  object to find one with a matching UUID of the
  instance it received. An <code>update</code> method
  is called on each instance with either a dash or 
  the count if the UUID matches.
</p>

<pre><code><span class="line-marker"></span>  <span class="variable other readwrite js">static</span> <span class="meta function-call js"><span class="variable function js">increment</span><span class="meta group js"><span class="punctuation section group js">(</span><span class="variable other readwrite js">instance</span></span><span class="meta group js"><span class="punctuation section group js">)</span></span></span> <span class="meta block js"><span class="punctuation section block js">{</span>
<span class="line-marker"></span>    <span class="variable language this js">this</span><span class="punctuation accessor js">.</span><span class="meta property object js">count</span> <span class="keyword operator assignment augmented js">+=</span> <span class="constant numeric js">1</span>
<span class="line-marker"></span>    <span class="meta for js"><span class="keyword control loop js">for</span> <span class="meta group js"><span class="punctuation section group js">(</span><span class="storage type js">let</span> <span class="variable other readwrite js">checkId</span> <span class="keyword operator js">in</span> <span class="variable language this js">this</span><span class="punctuation accessor js">.</span><span class="meta property object js">instances</span><span class="punctuation section group js">)</span></span> <span class="meta block js"><span class="punctuation section block js">{</span>
<span class="line-marker"></span>      <span class="meta conditional js"><span class="keyword control conditional js">if</span> <span class="meta group js"><span class="punctuation section group js">(</span><span class="variable other readwrite js">checkId</span> <span class="keyword operator comparison js">===</span> <span class="variable other object js">instance</span><span class="punctuation accessor js">.</span><span class="meta property object js">uuid</span><span class="punctuation section group js">)</span></span> <span class="meta block js"><span class="punctuation section block js">{</span>
<span class="line-marker"></span>        <span class="variable language this js">this</span><span class="punctuation accessor js">.</span><span class="meta property object js">instances</span><span class="meta brackets js"><span class="punctuation section brackets js">[</span><span class="variable other readwrite js">checkId</span><span class="punctuation section brackets js">]</span></span><span class="punctuation accessor js">.</span><span class="meta function-call method js"><span class="variable function js">update</span><span class="meta group js"><span class="punctuation section group js">(</span><span class="variable language this js">this</span><span class="punctuation accessor js">.</span><span class="meta property object js">count</span></span><span class="meta group js"><span class="punctuation section group js">)</span></span></span>
<span class="line-marker"></span>      </span><span class="meta block js"><span class="punctuation section block js">}</span></span></span> <span class="meta conditional js"><span class="keyword control conditional js">else</span> <span class="meta block js"><span class="punctuation section block js">{</span>
<span class="line-marker"></span>        <span class="variable language this js">this</span><span class="punctuation accessor js">.</span><span class="meta property object js">instances</span><span class="meta brackets js"><span class="punctuation section brackets js">[</span><span class="variable other readwrite js">checkId</span><span class="punctuation section brackets js">]</span></span><span class="punctuation accessor js">.</span><span class="meta function-call method js"><span class="variable function js">update</span><span class="meta group js"><span class="punctuation section group js">(</span><span class="string quoted double js"><span class="punctuation definition string begin js">&quot;</span>-<span class="punctuation definition string end js">&quot;</span></span></span><span class="meta group js"><span class="punctuation section group js">)</span></span></span>
<span class="line-marker"></span>      </span><span class="meta block js"><span class="punctuation section block js">}</span></span></span>
<span class="line-marker"></span>    </span><span class="meta block js"><span class="punctuation section block js">}</span></span></span>
<span class="line-marker"></span>  <span class="punctuation section block js">}</span></span></code></pre>

<p>
  Finally, the <code>removeInstance()</code> method
  provides the way to remove instances from 
  the <code>instances</code> object.
</p>

<pre><code><span class="line-marker"></span>  <span class="variable other readwrite js">static</span> <span class="meta function-call js"><span class="variable function js">removeInstance</span><span class="meta group js"><span class="punctuation section group js">(</span><span class="variable other readwrite js">instance</span></span><span class="meta group js"><span class="punctuation section group js">)</span></span></span> <span class="meta block js"><span class="punctuation section block js">{</span>
<span class="line-marker"></span>    <span class="keyword operator js">delete</span> <span class="variable language this js">this</span><span class="punctuation accessor js">.</span><span class="meta property object js">instances</span><span class="meta brackets js"><span class="punctuation section brackets js">[</span><span class="variable other object js">instance</span><span class="punctuation accessor js">.</span><span class="meta property object js">uuid</span><span class="punctuation section brackets js">]</span></span>
<span class="line-marker"></span>  <span class="punctuation section block js">}</span></span></code></pre>



<h2>The Instance Methods</h2>

<p>
  The <code>constructor()</code> method preps new
  instances by generating a UUID, and attaching 
  the shadowRoot.
</p>


<pre><code><span class="line-marker"></span>  <span class="meta function-call js"><span class="variable function js">constructor</span><span class="meta group js"><span class="punctuation section group js">(</span></span><span class="meta group js"><span class="punctuation section group js">)</span></span></span> <span class="meta block js"><span class="punctuation section block js">{</span>
<span class="line-marker"></span>    <span class="meta function-call js"><span class="support function js">super</span><span class="meta group js"><span class="punctuation section group js">(</span></span><span class="meta group js"><span class="punctuation section group js">)</span></span></span>
<span class="line-marker"></span>    <span class="variable language this js">this</span><span class="punctuation accessor js">.</span><span class="meta property object js">uuid</span> <span class="keyword operator assignment js">=</span> <span class="variable language self js">self</span><span class="punctuation accessor js">.</span><span class="meta property object js">crypto</span><span class="punctuation accessor js">.</span><span class="meta function-call method js"><span class="variable function js">randomUUID</span><span class="meta group js"><span class="punctuation section group js">(</span></span><span class="meta group js"><span class="punctuation section group js">)</span></span></span>
<span class="line-marker"></span>    <span class="variable language this js">this</span><span class="punctuation accessor js">.</span><span class="meta function-call method js"><span class="variable function js">attachShadow</span><span class="meta group js"><span class="punctuation section group js">(</span><span class="meta object-literal js"><span class="punctuation section block js">{</span><span class="meta object-literal key js">mode</span><span class="punctuation separator key-value js">:</span> <span class="string quoted single js"><span class="punctuation definition string begin js">&#39;</span>open<span class="punctuation definition string end js">&#39;</span></span><span class="punctuation section block js">}</span></span></span><span class="meta group js"><span class="punctuation section group js">)</span></span></span>
<span class="line-marker"></span>  <span class="punctuation section block js">}</span></span></code></pre>


<p>
  The <code>connectedCallback()</code> method is called
  when new instances are added to the page. It 
  registers the component by calling the
  static <code>registerInstance()</code> method 
  through <code>this.constructor</code>. Next, it
  calls the instances <code>addContent()</code> 
  and <code>addEventListeners()</code> methods
  to set up the element. 
</p>

<pre><code><span class="line-marker"></span>  <span class="meta function-call js"><span class="variable function js">connectedCallback</span><span class="meta group js"><span class="punctuation section group js">(</span></span><span class="meta group js"><span class="punctuation section group js">)</span></span></span> <span class="meta block js"><span class="punctuation section block js">{</span>
<span class="line-marker"></span>    <span class="variable language this js">this</span><span class="punctuation accessor js">.</span><span class="variable language constructor js">constructor</span><span class="punctuation accessor js">.</span><span class="meta function-call method js"><span class="variable function js">registerInstance</span><span class="meta group js"><span class="punctuation section group js">(</span><span class="variable language this js">this</span></span><span class="meta group js"><span class="punctuation section group js">)</span></span></span>
<span class="line-marker"></span>    <span class="variable language this js">this</span><span class="punctuation accessor js">.</span><span class="meta function-call method js"><span class="variable function js">addContent</span><span class="meta group js"><span class="punctuation section group js">(</span></span><span class="meta group js"><span class="punctuation section group js">)</span></span></span>
<span class="line-marker"></span>    <span class="variable language this js">this</span><span class="punctuation accessor js">.</span><span class="meta function-call method js"><span class="variable function js">addEventListeners</span><span class="meta group js"><span class="punctuation section group js">(</span></span><span class="meta group js"><span class="punctuation section group js">)</span></span></span>
<span class="line-marker"></span>  <span class="punctuation section block js">}</span></span></code></pre>

<p>
  The <code>addContent()</code> method is responsible 
  for populating the shadowRoot's HTML. 
</p>

<pre><code><span class="line-marker"></span>  <span class="meta function-call js"><span class="variable function js">addContent</span><span class="meta group js"><span class="punctuation section group js">(</span></span><span class="meta group js"><span class="punctuation section group js">)</span></span></span> <span class="meta block js"><span class="punctuation section block js">{</span>
<span class="line-marker"></span>    <span class="storage type js">const</span> <span class="variable other readwrite js">template</span> <span class="keyword operator assignment js">=</span> 
<span class="line-marker"></span>      <span class="variable language this js">this</span><span class="punctuation accessor js">.</span><span class="meta property object js">ownerDocument</span><span class="punctuation accessor js">.</span><span class="meta function-call method js"><span class="support function dom js">createElement</span><span class="meta group js"><span class="punctuation section group js">(</span><span class="string quoted single js"><span class="punctuation definition string begin js">&#39;</span>template<span class="punctuation definition string end js">&#39;</span></span></span><span class="meta group js"><span class="punctuation section group js">)</span></span></span>
<span class="line-marker"></span>    <span class="variable other object js">template</span><span class="punctuation accessor js">.</span><span class="meta property object js">innerHTML</span> <span class="keyword operator assignment js">=</span> <span class="string template js"><span class="punctuation definition string template begin js">`</span>&lt;button&gt;-&lt;/button&gt;<span class="punctuation definition string template end js">`</span></span>
<span class="line-marker"></span>    <span class="storage type js">const</span> <span class="variable other readwrite js">content</span> <span class="keyword operator assignment js">=</span> 
<span class="line-marker"></span>      <span class="variable other object js">template</span><span class="punctuation accessor js">.</span><span class="meta property object js">content</span><span class="punctuation accessor js">.</span><span class="meta function-call method js"><span class="support function dom js">cloneNode</span><span class="meta group js"><span class="punctuation section group js">(</span><span class="constant language boolean true js">true</span></span><span class="meta group js"><span class="punctuation section group js">)</span></span></span>
<span class="line-marker"></span>    <span class="variable language this js">this</span><span class="punctuation accessor js">.</span><span class="meta property object js">shadowRoot</span><span class="punctuation accessor js">.</span><span class="meta function-call method js"><span class="variable function js">append</span><span class="meta group js"><span class="punctuation section group js">(</span><span class="variable other readwrite js">content</span></span><span class="meta group js"><span class="punctuation section group js">)</span></span></span>
<span class="line-marker"></span>  <span class="punctuation section block js">}</span></span></code></pre>

<p>
  The <code>addEventListeners()</code> method 
  attaches the instance's <code>handleClick()</code> 
  method to the HTML button. It's set up to use
  <code>call</code> so the instance itself can
  be accessed in the static method to get its UUID. 
</p>

<pre><code><span class="line-marker"></span>  <span class="meta function-call js"><span class="variable function js">addEventListeners</span><span class="meta group js"><span class="punctuation section group js">(</span></span><span class="meta group js"><span class="punctuation section group js">)</span></span></span> <span class="meta block js"><span class="punctuation section block js">{</span>
<span class="line-marker"></span>    <span class="variable language this js">this</span><span class="punctuation accessor js">.</span><span class="meta property object js">button</span> <span class="keyword operator assignment js">=</span> <span class="variable language this js">this</span><span class="punctuation accessor js">.</span><span class="meta property object js">shadowRoot</span><span class="punctuation accessor js">.</span><span class="meta function-call method js"><span class="variable function js">querySelector</span><span class="meta group js"><span class="punctuation section group js">(</span><span class="string quoted single js"><span class="punctuation definition string begin js">&#39;</span>button<span class="punctuation definition string end js">&#39;</span></span></span><span class="meta group js"><span class="punctuation section group js">)</span></span></span>
<span class="line-marker"></span>    <span class="variable language this js">this</span><span class="punctuation accessor js">.</span><span class="meta property object js">button</span><span class="punctuation accessor js">.</span><span class="meta function-call method js"><span class="variable function js">addEventListener</span><span class="meta group js"><span class="punctuation section group js">(</span><span class="string quoted single js"><span class="punctuation definition string begin js">&#39;</span>click<span class="punctuation definition string end js">&#39;</span></span><span class="punctuation separator comma js">,</span> <span class="meta function declaration js"><span class="punctuation section group begin js">(</span><span class="variable parameter function js">event</span><span class="punctuation section group end js">)</span><span class="meta function declaration js"> </span><span class="storage type function arrow js">=&gt;</span></span> <span class="meta block js"><span class="punctuation section block js">{</span>
<span class="line-marker"></span>      <span class="variable language this js">this</span><span class="punctuation accessor js">.</span><span class="meta property object js">handleClick</span><span class="punctuation accessor js">.</span><span class="meta function-call method js"><span class="variable function js">call</span><span class="meta group js"><span class="punctuation section group js">(</span><span class="variable language this js">this</span><span class="punctuation separator comma js">,</span> <span class="variable other readwrite js">event</span></span><span class="meta group js"><span class="punctuation section group js">)</span></span></span> 
<span class="line-marker"></span>    <span class="punctuation section block js">}</span></span></span><span class="meta group js"><span class="punctuation section group js">)</span></span></span>
<span class="line-marker"></span>  <span class="punctuation section block js">}</span></span></code></pre>


<p>
  The <code>handleClick()</code> method sends
  the instances UUID to the static <code>increment()</code>
  method through <code>this.constructor</code>.
</p>

<pre><code><span class="line-marker"></span>  <span class="meta function-call js"><span class="variable function js">handleClick</span><span class="meta group js"><span class="punctuation section group js">(</span><span class="variable other readwrite js">event</span></span><span class="meta group js"><span class="punctuation section group js">)</span></span></span> <span class="meta block js"><span class="punctuation section block js">{</span>
<span class="line-marker"></span>    <span class="variable language this js">this</span><span class="punctuation accessor js">.</span><span class="variable language constructor js">constructor</span><span class="punctuation accessor js">.</span><span class="meta function-call method js"><span class="variable function js">increment</span><span class="meta group js"><span class="punctuation section group js">(</span><span class="variable language this js">this</span></span><span class="meta group js"><span class="punctuation section group js">)</span></span></span>
<span class="line-marker"></span>  <span class="punctuation section block js">}</span></span></code></pre>

<p>
  The <code>update</code> method receives a new
  value and updates the button text to display it
</p>

<pre><code><span class="line-marker"></span>  <span class="meta function-call js"><span class="variable function js">update</span><span class="meta group js"><span class="punctuation section group js">(</span><span class="variable other readwrite js">value</span></span><span class="meta group js"><span class="punctuation section group js">)</span></span></span> <span class="meta block js"><span class="punctuation section block js">{</span>
<span class="line-marker"></span>    <span class="variable language this js">this</span><span class="punctuation accessor js">.</span><span class="meta property object js">button</span><span class="punctuation accessor js">.</span><span class="meta property object js">innerHTML</span> <span class="keyword operator assignment js">=</span> <span class="variable other readwrite js">value</span>
<span class="line-marker"></span>  <span class="punctuation section block js">}</span></span></code></pre>

<p>
  Finally, the <code>disconnectedCallback()</code> method
  fires when an instance is removed from the DOM. It calls
  the static <code>removeInstance</code> method via
  <code>this.constructor</code>.
</p>

<pre><code><span class="line-marker"></span>  <span class="meta function-call js"><span class="variable function js">disconnectedCallback</span><span class="meta group js"><span class="punctuation section group js">(</span></span><span class="meta group js"><span class="punctuation section group js">)</span></span></span> <span class="meta block js"><span class="punctuation section block js">{</span>
<span class="line-marker"></span>    <span class="variable language this js">this</span><span class="punctuation accessor js">.</span><span class="variable language constructor js">constructor</span><span class="punctuation accessor js">.</span><span class="meta function-call method js"><span class="variable function js">removeInstance</span><span class="meta group js"><span class="punctuation section group js">(</span><span class="variable language this js">this</span></span><span class="meta group js"><span class="punctuation section group js">)</span></span></span>
<span class="line-marker"></span>  <span class="punctuation section block js">}</span></span></code></pre>

<script type="module" src="component.js"></script>

<h2>Conclusion</h2>

<p>
  When I first started looking into this I thought
  coordinating between instances of a component 
  would require adding a singleton or other 
  object into the mix. Using the <code>static</code>
  abilities of a class turns out to be enough.
</p>
  



<h2>References</h2>

<ul>
  <li>
    <a href="https://developer.mozilla.org/en-US/docs/Web/API/Web_components">Web Components - MDN</a>
  </li>
  <li>
    <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Classes">Classes - MDN</a>
  </li>
  <li>
    <a href="https://developer.mozilla.org/en-US/docs/Web/API/Crypto/randomUUID">randomUUID - MDN</a>
  </li>
  <li>
    <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Classes/static">static - MDN</a>
  </li>
</ul>



    </main>

    <footer>
      <div>
        made by <a href="https://www.alanwsmith.com/">alan w smith</a>
      </div>
      <div>
        <a href="https://github.com/alanwsmith/web-component-techniques.alanwsmith.com">source code</a> ~
        <a href="https://links.alanwsmith.com/">other projects</a> ~
        <a href="https://socials.alanwsmith.com/">socials</a>
      </div>
    </footer>

  </body>
</html>

